{% extends 'base_home.html'%}

{% block content %}

  <div id="loginpage">
    <div class="col-12 border" >
      <div class="my-5">
        <h1 class="login_h1">Instagram</h1>
      </div>
      <p style="font-size: 17px;">친구들의 사진과 동영상을 보려면 가입하세요</p>
      <form action="" method="POST" class="d-flex flex-column" >
        {% csrf_token %}
        <div class=" my-1">
            {{form.username}}
        </div>
        <div class=" my-1">
          {{form.nickname}}
        </div>
        <div class="my-1">
          {{form.password1}}
        </div>
        <div class="my-1">
          {{form.password2}}
        </div>
        <button id="signbtn" class="btn btn-primary w-75 mx-auto my-1" disabled=true>가입</button>
      </form>
      <div class="mt-3 py-1" style="font-size: 0.5rem;">
        가입하면 Instagram의 약관, 데이터정책 및 쿠키 정책에 동의하게 됩니다.
      </div>
    </div>
    <hr>
    <div class="w-100 border py-5 my-1" >
      <p>계정이 있으신가요?<a href="{% url 'accounts:login' %}">로그인</a></p>
    </div>
  </div>
{% endblock %}

{% block script %}
<script>
  const inputId = document.querySelector('#id_username')
  const inputNickname = document.querySelector('#id_nickname')
  const inputPassword = document.querySelector('#id_password1')
  const submitBtn = document.querySelector('#signbtn')
  const inputPassword2 = document.querySelector('#id_password2')

  inputId.classList.add('w-75')
  inputId.classList.add('py-1')
  inputId.placeholder = '아이디를 입력해주세요'
  inputId.addEventListener('input',checkinput)

  inputNickname.classList.add('w-75')
  inputNickname.classList.add('py-1')
  inputNickname.placeholder = '닉네임을 입력해주세요'
  inputNickname.addEventListener('input',checkinput)

  inputPassword.classList.add('w-75')
  inputPassword.classList.add('py-1')
  inputPassword.placeholder = '비밀번호를 입력해주세요'
  inputPassword.addEventListener('input',checkinput)

  inputPassword2.classList.add('w-75')
  inputPassword2.classList.add('py-1')
  inputPassword2.placeholder = '비밀번호를 다시 입력해주세요'
  inputPassword2.addEventListener('input',checkinput)

  function checkinput(){
    var inputIdValue = inputId.value
    var inputPasswordValue = inputPassword.value
    var inputPasswordValue2 = inputPassword2.value
    var inputNicknameValue = inputNickname.value
    if (inputIdValue === '' || inputPasswordValue === '' || inputPasswordValue2 === '' || inputNicknameValue === ''){
      console.log('비활성화')
      submitBtn.disabled = true

    } else {
      console.log('활성화')
      submitBtn.disabled = false
    }

  }
</script>
{% endblock %}